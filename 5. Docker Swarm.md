# Домашнее задание к занятию "5. Оркестрация кластером Docker контейнеров на примере Docker Swarm"

## Ruslan Aniskin

## Задача 1

Дайте письменые ответы на следующие вопросы:

- В чём отличие режимов работы сервисов в Docker Swarm кластере: replication и global?
- Какой алгоритм выбора лидера используется в Docker Swarm кластере?
- Что такое Overlay Network?

---
В режиме "replicated" каждый сервис запускается в определенном количестве реплик, которые могут быть размещены на разных узлах кластера. Количество реплик задается при запуске сервиса и может быть изменено во время работы. Если какая-то из реплик отказывает, Docker Swarm автоматически создает новую реплику на другом узле кластера, чтобы сохранить заданное количество реплик. Режим "replicated" обычно используется для приложений, которые могут быть масштабированы горизонтально путем добавления дополнительных реплик.
В режиме "global" каждый узел в кластере запускает одну реплику сервиса. Количество реплик не задается вручную, и кластер самостоятельно управляет запуском и остановкой реплик. Этот режим обычно используется для сервисов, которые не могут быть масштабированы горизонтально, например, баз данных или кэш-серверов.
В обоих режимах сервисы автоматически перезапускаются в случае сбоев или сбоев узлов, на которых они были запущены, чтобы обеспечить непрерывность работы приложения.


Docker Swarm использует модифицированный алгоритм выбора лидера RAFT для выбора лидера в кластере.
Алгоритм RAFT гарантирует, что кластер имеет только одного лидера в любой момент времени, который отвечает за координацию кластера. Каждый узел в кластере может быть в одном из трех состояний: "лидер", "последователь" или "кандидат".
Docker Swarm использует модифицированный алгоритм выбора лидера RAFT (изначально разработанный для консенсуса в распределенных системах) для выбора лидера в кластере.

Алгоритм RAFT гарантирует, что кластер имеет только одного лидера в любой момент времени, который отвечает за координацию кластера. Каждый узел в кластере может быть в одном из трех состояний: "лидер", "последователь" или "кандидат".
Алгоритм RAFT работает следующим образом:
Узлы выбирают лидера, отправляя друг другу сообщения с запросом на голосование.
Каждый узел голосует за один из кандидатов (включая самого себя) и отправляет свой голос другим узлам.
Кандидат, который получает большинство голосов, становится лидером и начинает отправлять heartbeat-сообщения, чтобы держать остальные узлы в курсе своего состояния.
Если узел не получает heartbeat-сообщения в течение некоторого времени, он переходит в состояние "последователь" и начинает ожидать сообщения от нового лидера.
Docker Swarm использует модифицированную версию этого алгоритма, который обеспечивает высокую доступность и отказоустойчивость кластера. В частности, Docker Swarm добавляет дополнительные механизмы для обеспечения безопасности и устойчивости кластера в случае сбоев и перерывов связи. Например, Docker Swarm использует систему кворумов для определения того, какие узлы должны участвовать в выборах лидера, и обеспечивает репликацию состояния кластера для обеспечения надежности и отказоустойчивости.

Overlay Network это виртуальная сеть, которая позволяет соединять контейнеры на разных хостах Docker в единую сеть. 
Это позволяет контейнерам общаться между собой, как если бы они были на одном хосте, несмотря на то, что они могут быть размещены на разных физических серверах и находиться в разных сетях.

---


## Задача 2

Создать ваш первый Docker Swarm кластер в Яндекс.Облаке

Для получения зачета, вам необходимо предоставить скриншот из терминала (консоли), с выводом команды:
```
docker node ls
```
![node](https://github.com/aniskinruslan/Virtualization-DB-Terraform/blob/79079bcc3780b8a0d340ff243ab7315b45ec28b4/swarm%20nodes%20.jpg) 


## Задача 3

Создать ваш первый, готовый к боевой эксплуатации кластер мониторинга, состоящий из стека микросервисов.

Для получения зачета, вам необходимо предоставить скриншот из терминала (консоли), с выводом команды:
```
docker service ls
```
![service](]https://github.com/aniskinruslan/Virtualization-DB-Terraform/blob/79079bcc3780b8a0d340ff243ab7315b45ec28b4/swarm%20service.jpg)

